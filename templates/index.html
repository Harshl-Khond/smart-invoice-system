<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--    <title>Invoices</title>-->
<!--    <style>-->
<!--        /* -&#45;&#45; Body & Fonts -&#45;&#45; */-->
<!--        body {-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            background: #f0f4f8;-->
<!--            color: #333;-->
<!--        }-->

<!--        .container {-->
<!--            max-width: 1100px;-->
<!--            margin: 40px auto;-->
<!--            padding: 30px;-->
<!--            background: #fff;-->
<!--            border-radius: 12px;-->
<!--            box-shadow: 0 8px 25px rgba(0,0,0,0.1);-->
<!--        }-->

<!--        /* -&#45;&#45; Logo -&#45;&#45; */-->
<!--        .logo-container {-->
<!--            text-align: center;-->
<!--            margin-bottom: 20px;-->
<!--        }-->
<!--        .logo-container img {-->
<!--            max-height: 80px;-->
<!--            width: auto;-->
<!--        }-->

<!--        h1 {-->
<!--            text-align: center;-->
<!--            margin-bottom: 30px;-->
<!--            color: #004d4d;-->
<!--            font-size: 2em;-->
<!--        }-->

<!--        /* -&#45;&#45; Buttons & Links -&#45;&#45; */-->
<!--        a.create-btn {-->
<!--            display: inline-block;-->
<!--            margin-bottom: 20px;-->
<!--            padding: 10px 25px;-->
<!--            background: #008080;-->
<!--            color: #fff;-->
<!--            font-weight: bold;-->
<!--            border-radius: 8px;-->
<!--            transition: background 0.3s, transform 0.2s;-->
<!--        }-->
<!--        a.create-btn:hover {-->
<!--            background: #00b3b3;-->
<!--            transform: scale(1.05);-->
<!--        }-->

<!--        a.view-link {-->
<!--            color: #008080;-->
<!--            font-weight: bold;-->
<!--            text-decoration: none;-->
<!--            transition: color 0.3s;-->
<!--        }-->
<!--        a.view-link:hover {-->
<!--            color: #00b3b3;-->
<!--            text-decoration: underline;-->
<!--        }-->

<!--        /* -&#45;&#45; Search Box -&#45;&#45; */-->
<!--        form.search-form {-->
<!--            display: flex;-->
<!--            justify-content: flex-start;-->
<!--            margin-bottom: 25px;-->
<!--        }-->
<!--        form.search-form input[type="text"] {-->
<!--            padding: 10px 12px;-->
<!--            width: 320px;-->
<!--            border: 1px solid #ccc;-->
<!--            border-radius: 8px 0 0 8px;-->
<!--            outline: none;-->
<!--            transition: all 0.3s;-->
<!--        }-->
<!--        form.search-form input[type="text"]:focus {-->
<!--            border-color: #008080;-->
<!--            box-shadow: 0 0 5px rgba(0,128,128,0.3);-->
<!--        }-->
<!--        form.search-form button {-->
<!--            padding: 10px 20px;-->
<!--            background: #008080;-->
<!--            color: #fff;-->
<!--            border: none;-->
<!--            border-radius: 0 8px 8px 0;-->
<!--            cursor: pointer;-->
<!--            transition: background 0.3s, transform 0.2s;-->
<!--        }-->
<!--        form.search-form button:hover {-->
<!--            background: #00b3b3;-->
<!--            transform: scale(1.05);-->
<!--        }-->

<!--        /* -&#45;&#45; Table Styling -&#45;&#45; */-->
<!--        table {-->
<!--            width: 100%;-->
<!--            border-collapse: separate;-->
<!--            border-spacing: 0;-->
<!--            border-radius: 12px;-->
<!--            overflow: hidden;-->
<!--            box-shadow: 0 4px 20px rgba(0,0,0,0.05);-->
<!--        }-->

<!--        th, td {-->
<!--            padding: 14px;-->
<!--            text-align: center;-->
<!--        }-->

<!--        th {-->
<!--            background: #004d4d;-->
<!--            color: #fff;-->
<!--            font-weight: bold;-->
<!--        }-->

<!--        tbody tr {-->
<!--            background: #ffffff;-->
<!--            transition: all 0.3s;-->
<!--        }-->

<!--        tbody tr:nth-child(even) {-->
<!--            background: #f2f7f7;-->
<!--        }-->

<!--        tbody tr:hover {-->
<!--            background: #e0f7f7;-->
<!--            transform: scale(1.01);-->
<!--        }-->

<!--        td {-->
<!--            font-size: 0.95em;-->
<!--        }-->

<!--        /* -&#45;&#45; Responsive -&#45;&#45; */-->
<!--        @media (max-width: 768px) {-->
<!--            table, thead, tbody, th, td, tr {-->
<!--                display: block;-->
<!--            }-->
<!--            th {-->
<!--                display: none;-->
<!--            }-->
<!--            td {-->
<!--                text-align: right;-->
<!--                padding-left: 50%;-->
<!--                position: relative;-->
<!--            }-->
<!--            td::before {-->
<!--                content: attr(data-label);-->
<!--                position: absolute;-->
<!--                left: 15px;-->
<!--                font-weight: bold;-->
<!--                text-transform: uppercase;-->
<!--                color: #555;-->
<!--            }-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container">-->

<!--    &lt;!&ndash; Company Logo &ndash;&gt;-->
<!--    <div class="logo-container">-->
<!--        <img src="{{ url_for('static', filename='company_logo.jpg') }}" alt="Company Logo">-->
<!--    </div>-->

<!--    <h1>Invoice List</h1>-->

<!--    &lt;!&ndash; Create Invoice Button &ndash;&gt;-->
<!--    <a href="{{ url_for('create_invoice') }}" class="create-btn">‚ûï Create New Invoice</a>-->

<!--    &lt;!&ndash; Search &ndash;&gt;-->
<!--    <form method="GET" class="search-form">-->
<!--        <input type="text" name="search" placeholder="Search Invoice ID or Client Name" value="{{ search_query or '' }}">-->
<!--        <button type="submit">üîç Search</button>-->
<!--    </form>-->

<!--    {% if invoices %}-->
<!--    <table>-->
<!--        <thead>-->
<!--            <tr>-->
<!--                <th>Invoice ID</th>-->
<!--                <th>Client Name</th>-->
<!--                <th>Total Bill (rs.)</th>-->
<!--                <th>Invoice Date</th>-->
<!--                <th>Due Date</th>-->
<!--                <th>View Invoice</th>-->
<!--            </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--            {% for inv in invoices %}-->
<!--            <tr>-->
<!--                <td data-label="Invoice ID">{{ inv.get("invoice_no","N/A") }}</td>-->
<!--                <td data-label="Client Name">{{ inv.get("client_name","N/A") }}</td>-->
<!--                <td data-label="Total Bill (rs.)">rs.{{ "%.2f"|format(inv.get("final_total",0)) }}</td>-->
<!--                <td data-label="Invoice Date">{{ inv.get("invoice_date","N/A") }}</td>-->
<!--                <td data-label="Due Date">{{ inv.get("due_date","N/A") }}</td>-->
<!--                <td data-label="View Invoice">-->
<!--                    <a href="{{ url_for('view_invoice', doc_id=inv.get('doc_id')) }}" class="view-link">View</a>-->
<!--                </td>-->
<!--            </tr>-->


<!--            {% endfor %}-->
<!--        </tbody>-->
<!--    </table>-->
<!--    {% else %}-->
<!--        <p style="text-align:center; font-size:1.1em; margin-top:20px; color:#777;">No invoices found.</p>-->
<!--    {% endif %}-->

<!--</div>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Invoices</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: #f0f4f8;
            color: #333;
        }
        .container {
            max-width: 1100px;
            margin: 40px auto;
            padding: 30px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .logo-container {
            text-align: center;
            margin-bottom: 20px;
        }
        .logo-container img {
            max-height: 80px;
            width: auto;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #004d4d;
            font-size: 2em;
        }
        a.create-btn {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 25px;
            background: #008080;
            color: #fff;
            font-weight: bold;
            border-radius: 8px;
            transition: background 0.3s, transform 0.2s;
            text-decoration: none;
        }
        a.create-btn:hover {
            background: #00b3b3;
            transform: scale(1.05);
        }
        a.view-link, button.delete-btn {
            font-weight: bold;
            text-decoration: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            border: none;
            transition: background 0.3s, transform 0.2s;
        }
        a.view-link {
            color: #fff;
            background: #008080;
        }
        a.view-link:hover {
            background: #00b3b3;
            transform: scale(1.05);
        }
        button.delete-btn {
            background: #cc0000;
            color: white;
        }
        button.delete-btn:hover {
            background: #ff1a1a;
            transform: scale(1.05);
        }
        form.search-form {
            display: flex;
            justify-content: flex-start;
            margin-bottom: 25px;
        }
        form.search-form input[type="text"] {
            padding: 10px 12px;
            width: 320px;
            border: 1px solid #ccc;
            border-radius: 8px 0 0 8px;
            outline: none;
            transition: all 0.3s;
        }
        form.search-form input[type="text"]:focus {
            border-color: #008080;
            box-shadow: 0 0 5px rgba(0,128,128,0.3);
        }
        form.search-form button {
            padding: 10px 20px;
            background: #008080;
            color: #fff;
            border: none;
            border-radius: 0 8px 8px 0;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
        }
        form.search-form button:hover {
            background: #00b3b3;
            transform: scale(1.05);
        }
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }
        th, td {
            padding: 14px;
            text-align: center;
        }
        th {
            background: #004d4d;
            color: #fff;
            font-weight: bold;
        }
        tbody tr {
            background: #ffffff;
            transition: all 0.3s;
        }
        tbody tr:nth-child(even) {
            background: #f2f7f7;
        }
        tbody tr:hover {
            background: #e0f7f7;
            transform: scale(1.01);
        }
        td {
            font-size: 0.95em;
        }
        /* Flash message box */
        .flash-message {
            padding: 12px 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-weight: 500;
        }
        .flash-success {
            background: #d4edda;
            color: #155724;
        }
        .flash-error {
            background: #f8d7da;
            color: #721c24;
        }
        .flash-warning {
            background: #fff3cd;
            color: #856404;
        }
        @media (max-width: 768px) {
            table, thead, tbody, th, td, tr {
                display: block;
            }
            th { display: none; }
            td {
                text-align: right;
                padding-left: 50%;
                position: relative;
            }
            td::before {
                content: attr(data-label);
                position: absolute;
                left: 15px;
                font-weight: bold;
                text-transform: uppercase;
                color: #555;
            }
        }
    </style>
</head>
<body>
<div class="container">

    <!-- Company Logo -->
    <div class="logo-container">
        <img src="{{ url_for('static', filename='company_logo.jpg') }}" alt="Company Logo">
    </div>

    <h1>Invoice List</h1>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash-message
            {% if category == 'success' %}flash-success
            {% elif category == 'error' %}flash-error
            {% else %}flash-warning{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <!-- Create Invoice Button -->
    <a href="{{ url_for('create_invoice') }}" class="create-btn">‚ûï Create New Invoice</a>

    <!-- Search -->
    <form method="GET" class="search-form">
        <input type="text" name="search" placeholder="Search Invoice ID or Client Name" value="{{ search_query or '' }}">
        <button type="submit">üîç Search</button>
    </form>

    {% if invoices %}
    <table>
        <thead>
            <tr>
                <th>Invoice ID</th>
                <th>Client Name</th>
                <th>Total Bill (‚Çπ)</th>
                <th>Invoice Date</th>
                <th>Due Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for inv in invoices %}
            <tr>
                <td data-label="Invoice ID">{{ inv.get("invoice_no","N/A") }}</td>
                <td data-label="Client Name">{{ inv.get("client_name","N/A") }}</td>
                <td data-label="Total Bill (‚Çπ)">‚Çπ{{ "%.2f"|format(inv.get("final_total",0)) }}</td>
                <td data-label="Invoice Date">{{ inv.get("invoice_date","N/A") }}</td>
                <td data-label="Due Date">{{ inv.get("due_date","N/A") }}</td>
                <td data-label="Actions">
                    <a href="{{ url_for('view_invoice', doc_id=inv.get('doc_id')) }}" class="view-link">View</a>
                    <form action="{{ url_for('delete_invoice', doc_id=inv.get('doc_id')) }}" method="POST" style="display:inline;">
                        <button type="submit" class="delete-btn" onclick="return confirm('Are you sure you want to delete this invoice?');">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p style="text-align:center; font-size:1.1em; margin-top:20px; color:#777;">No invoices found.</p>
    {% endif %}
</div>
</body>
</html>
